<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login | Ultimate.dls Chat</title>
<style>
  body { font-family: Arial, sans-serif; background: #f4f4f4; display: flex; justify-content: center; align-items: center; height: 100vh; }
  .card { background: #fff; padding: 30px; border-radius: 10px; width: 90%; max-width: 400px; box-shadow: 0 0 10px rgba(0,0,0,0.1); text-align: center; }
  input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
  button { background: #2c3e50; color: white; padding: 10px; width: 100%; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background: #34495e; }
  a { color: #2c3e50; display: inline-block; margin-top: 10px; }
</style>
</head>
<body>
<div class="card">
  <h2>Login to Chat</h2>
  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Password" required />
  <button id="loginBtn">Login</button>
  <a href="signup.html">Don't have an account? Sign Up</a>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBdK_tiTsYhX27IsdjBnBRJ1a-4Eanoe8g",
    authDomain: "ultimatedlschat.firebaseapp.com",
    databaseURL: "https://ultimatedlschat-default-rtdb.firebaseio.com",
    projectId: "ultimatedlschat",
    storageBucket: "ultimatedlschat.firebasestorage.app",
    messagingSenderId: "485655960703",
    appId: "1:485655960703:web:b6a97068cf5ebf1e98734a",
    measurementId: "G-SDE2YCCMZW"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  document.getElementById("loginBtn").onclick = async () => {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    try {
      await signInWithEmailAndPassword(auth, email, password);
      window.location.href = "chat.html";
    } catch (error) {
      alert("Login failed: " + error.message);
    }
  };

  // If user already logged in
  onAuthStateChanged(auth, (user) => {
    if (user) window.location.href = "chat.html";
  });
</script>
</body>
</html>
